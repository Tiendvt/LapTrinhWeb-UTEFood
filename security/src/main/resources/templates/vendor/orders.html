Krant.27
_krant.27
Online



Rythm hopped into the server. — 12/4/24, 2:51 PM
Rythm
APP
 — 12/4/24, 2:52 PM
Click below to start a Rythm session
Good to see you, ????. — 12/4/24, 2:56 PM
Rythm
APP
 — 12/4/24, 2:57 PM
Click below to start a Rythm session
abc joined the party. — 12/4/24, 2:57 PM
Everyone welcome Đỗ Văn Tiến! — 12/4/24, 2:58 PM
Quang Vinh joined the party. — 12/4/24, 3:09 PM
Đỗ Văn Tiến — 12/4/24, 11:03 PM
List<Product> findByTitleContainingIgnoreCaseOrCategory_NameContainingIgnoreCase(String ch, String ch2);
Krant.27 — 12/4/24, 11:05 PM
ategory_Name
Đỗ Văn Tiến — 12/4/24, 11:07 PM
List<Product> results = productRepository.findByTitleContainingIgnoreCaseOrCategory_NameContainingIgnoreCase("Laptop", "Electronics");
Expected Output:
A list of products that:

Have "Laptop" in their title.
OR belong to a category with "Electronics" in its name.
Krant.27 — 12/5/24, 12:35 AM
package vn.iotstar.security.controllers;

import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Path;
Expand
message.txt
6 KB
Krant.27 — 12/6/24, 12:13 PM
import jakarta.persistence.*;
import java.util.List;

@Entity
public class Order {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String orderStatus; // Trạng thái đơn hàng

    @OneToOne(cascade = CascadeType.ALL)
    @JoinColumn(name = "order_address_id", referencedColumnName = "id")
    private OrderAddress orderAddress; // Quan hệ 1-1 với địa chỉ giao hàng

    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
    private List<OrderProduct> orderProducts; // Quan hệ 1-N với sản phẩm trong đơn hàng

    // Các trường bổ sung như ngày tạo, tổng giá tiền, người dùng...
    private Double totalAmount;
    private String customerName;

    // Getters and Setters
}
import jakarta.persistence.*;

@Entity
public class OrderAddress {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String street;
    private String city;
    private String state;
    private String postalCode;
    private String country;

    @OneToOne(mappedBy = "orderAddress")
    private Order order; // Quan hệ ngược 1-1 với Order

    // Getters and Setters
}
import jakarta.persistence.*;

@Entity
public class OrderProduct {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @ManyToOne
    @JoinColumn(name = "order_id", referencedColumnName = "id")
    private Order order; // Quan hệ N-1 với Order

    private String productName; // Tên sản phẩm
    private Integer quantity;   // Số lượng
    private Double price;       // Giá sản phẩm

    // Getters and Setters
}
Đỗ Văn Tiến — 12/6/24, 1:33 PM
package vn.iotstar.security.model;

import java.time.LocalDate;
import java.util.List;

import jakarta.persistence.;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@AllArgsConstructor
@NoArgsConstructor
@Getter
@Setter
@Entity
public class Order {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    private String orderId;

    private LocalDate orderDate;

    @ManyToOne
    private User user;

    private Double totalPrice;

    private String paymentType;

    @OneToMany(mappedBy = "order", cascade = CascadeType.ALL)
    private List<ProductOrder> productOrders;

    @OneToOne(cascade = CascadeType.ALL)
    private OrderAddress orderAddress;

    private String status;
}
package vn.iotstar.security.model;

import jakarta.persistence.;
import lombok.AllArgsConstructor;
import lombok.Getter;
import lombok.NoArgsConstructor;
import lombok.Setter;

@AllArgsConstructor
@NoArgsConstructor
@Getter
@Setter
@Entity
public class ProductOrder {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Integer id;

    @ManyToOne
    private Shop shop;  // The shop selling these products

    @ManyToOne
    private Order order;  // The order this product is part of

    private Double price;

    private String status;

    @OneToMany(mappedBy = "productOrder", cascade = CascadeType.ALL)
    private List<Product> products;  // List of products from the same shop

    private Integer quantity;
}
Krant.27 — 12/6/24, 2:13 PM
package vn.iotstar.security.model;

import java.time.LocalDate;

import jakarta.persistence.CascadeType;
import jakarta.persistence.Column;
Expand
Order.java
2 KB
Đỗ Văn Tiến — 12/6/24, 3:10 PM
<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">

<head>
<meta charset="ISO-8859-1">
Expand
home.html
6 KB
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">

<head>

<meta charset="ISO-8859-1">
Expand
base.html
6 KB
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<head>
    <meta charset="ISO-8859-1">
    <title>Login Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
Expand
login.html
4 KB
Đỗ Văn Tiến — Today at 11:41 AM
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">


<head>
    <meta charset="ISO-8859-1">
Expand
orders.html
10 KB
﻿
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">


<head>
    <meta charset="ISO-8859-1">
    <title>Vendor Orders</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <style>
        .card-sh { 
            border-radius: 10px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
        }
        .table th, .table td { 
            vertical-align: middle; 
        }
        .pagination .page-item.active .page-link {
            background-color: #007bff;
            border-color: #007bff;
        }
        .pagination .page-link:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }
        .page-link {
            color: #007bff;
        }
    </style>
</head>

<body>
    <section>
        <div class="container-fluid mt-5 p-1">
            <div class="row">
                <p class="text-center fs-3 mt-2">Vendor Orders</p>
                <hr>
                <a href="/vendor/" class="text-decoration-none"><i class="fa-solid fa-arrow-left"></i> Back</a>
                
                <th:block th:if="${session.succMsg}">
                    <p class="text-success text-center fw-bold">[[${session.succMsg}]]</p>
                </th:block>

                <th:block th:if="${session.errorMsg}">
                    <p class="text-danger text-center fw-bold">[[${session.errorMsg}]]</p>
                </th:block>

                <div class="col-md-4 p-4">
                    <form action="/vendor/search-order" method="get">
                        <div class="row">
                            <div class="col">
                                <input type="text" class="form-control" name="orderId" placeholder="Enter order id">
                            </div>
                            <div class="col">
                                <button class="btn btn-primary col">Search</button>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="col-md-12 ps-4 pe-4">
                    <table class="table table-bordered card-sh">
                        <thead class="table-light">
                            <tr>
                                <th scope="col">Order Id</th>
                                <th scope="col">Deliver Details</th>
                                <th scope="col">Date</th>
                                <th scope="col">Product Details</th>
                                <th scope="col">Price</th>
                                <th scope="col">Status</th>
                                <th scope="col">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <th:block th:unless="${srch}">
                                <th:block th:if="${#lists.isEmpty(orders)}">
                                    <tr>
                                        <td colspan="7" class="text-center text-danger">No orders available.</td>
                                    </tr>
                                </th:block>
                                <th:block th:unless="${#lists.isEmpty(orders)}">
                                    <tr th:each="o:${orders}">
                                        <th scope="row">[[${o.orderId}]]</th>
                                        <td>
                                            Name: [[${o.orderAddress.firstName + ' ' + o.orderAddress.lastName}]]<br>
                                            Email: [[${o.orderAddress.email}]]<br>
                                            Mobno: [[${o.orderAddress.mobileNo}]]<br>
                                            Address: [[${o.orderAddress.address}]]<br>
                                            City: [[${o.orderAddress.city}]]<br>
                                            Province: [[${o.orderAddress.province}]], [[${o.orderAddress.pincode}]]
                                        </td>
                                        <td>[[${o.orderDate}]]</td>
                                        <td>[[${o.product.title}]]</td>
                                        <td>Quantity: [[${o.quantity}]] <br>Price: [[${o.price}]] <br>Total Price: [[${o.quantity * o.price}]]</td>
                                        <td>[[${o.status}]]</td>
                                        <td>
                                            <form action="/vendor/update-order-status" method="post">
                                                <div class="row">
                                                    <div class="col">
                                                        <select class="form-control" name="st">
                                                            <option>--select--</option>
                                                            <option value="1">New Order</option>
                                                            <option value="2">Order Confirmed</option>
                                                            <option value="3">In Transit</option>
                                                            <option value="4">Delivered</option>
                                                            <option value="5">Cancelled</option>
                                                            <option value="6">Returned - Refunded</option>
                                                        </select>
                                                    </div>
                                                    <input th:value="${o.id}" name="id" type="hidden">
                                                    <div class="col">
                                                        <th:block th:if="${o.status == 'Cancelled' || o.status == 'Delivered' || o.status == 'Returned - Refunded' }">
                                                            <button class="btn btn-primary btn-sm col disabled">Update</button>
                                                        </th:block>
                                                        <th:block th:unless="${o.status == 'Cancelled' || o.status == 'Delivered' || o.status == 'Returned - Refunded'}">
                                                            <button class="btn btn-sm btn-primary">Update</button>
                                                        </th:block>
                                                    </div>
                                                </div>
                                            </form>
                                        </td>
                                    </tr>
                                </th:block>
                            </th:block>
                        </tbody>
                    </table>


                    <!-- Pagination -->
                    <th:block th:if="${!srch && !#lists.isEmpty(orders)}">
                        <div class="row">
                            <div class="col-md-4">Total Orders: [[${totalElements}]]</div>
                            <div class="col-md-6">
                                <nav aria-label="Page navigation example">
                                    <ul class="pagination">
                                        <li class="page-item" th:classappend="${isFirst} ? 'disabled':''">
                                            <a class="page-link" th:href="@{'/vendor/orders?pageNo=' + ${pageNo - 1}}" aria-label="Previous">
                                                <span aria-hidden="true">&laquo;</span>
                                            </a>
                                        </li>
                                        <li th:each="i:${#numbers.sequence(1, totalPages)}" class="page-item" th:classappend="${pageNo + 1 == i} ? 'active':''">
                                            <a class="page-link" th:href="@{'/vendor/orders?pageNo=' + ${i - 1}}">[[${i}]]</a>
                                        </li>
                                        <li class="page-item" th:classappend="${isLast} ? 'disabled':''">
                                            <a class="page-link" th:href="@{'/vendor/orders?pageNo=' + ${pageNo + 1}}" aria-label="Next">
                                                <span aria-hidden="true">&raquo;</span>
                                            </a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>
    </section>
</body>
</html>

orders.html
10 KB